<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<script type="text/javascript" src="http://api.map.baidu.com/api?v=2&ak=127oSt2V27bMnuGV8PC8Kkg6"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
<title>TEST</title>
<style type="text/css">
body, html,#allmap {width: 100%;height: 100%;overflow: hidden;margin:0; }
.mp{
    background-color:red;
}
</style>
</head>
<body style="padding:10px;">
  
	<div id="allmap" style="width:100%;height:90%;border-bottom:1px solid black;"></div>
    <div  style="width:100%;height:10%;">
      <input type="button" id="drive" onclick="drivemap()" value="驾车" style="width:100px;height:40px;margin-left: 20px;"/>
      <input type="button" id="walk" style="width: 100px;height:40px;margin-left:20px;" value="步行" onclick="walk()"/></div>
   </div>
</body>
</html>
<script type="text/javascript">
//修改固定地点x、y
var x=113.113182;
var y=23.029383;
//初始化驾车
$(function() {
	var x1=getQueryString("x");
	var y1=getQueryString("y");
     $("#drive").addClass("mp");
	map(x1,y1);
	
	
});
//驾驶
function drivemap(){
    $("#drive").addClass("mp");
     $("#walk").removeClass("mp");
    var x1=getQueryString("x");
	var y1=getQueryString("y");
	map(x1,y1);


}
function map(y1,y2){
var map = new BMap.Map("allmap");            // 创建Map实例
	var point = new BMap.Point(113.0893,23.0158);    // 创建点坐标
	map.centerAndZoom(point,14);                     // 初始化地图,设置中心点坐标和地图级别。
	map.enableScrollWheelZoom();                       //启用滚轮放大缩小
	var pe= new BMap.Point(x,y);
    var ps = new BMap.Point(y1,y2);
	var driving = new BMap.DrivingRoute(map, {    
	 renderOptions: {    
	   map: map,    
	   autoViewport: true    
	 }    
	});  
	driving.search(ps, pe);

}
//步行
function walk(){
    $("#walk").addClass("mp");
    $("#drive").removeClass("mp");
    var x1=getQueryString("x");
	var y1=getQueryString("y");
	walkmap(x1,y1);


}
function walkmap(y1,y2){
var map = new BMap.Map("allmap");            // 创建Map实例
	var point = new BMap.Point(113.0893,23.0158);    // 创建点坐标
	map.centerAndZoom(point,14);                     // 初始化地图,设置中心点坐标和地图级别。
	map.enableScrollWheelZoom();                       //启用滚轮放大缩小
	var pe= new BMap.Point(x,y);
    var ps = new BMap.Point(y1,y2);
	var driving = new BMap.WalkingRoute(map, {
	 renderOptions: {
	   map: map,
	   autoViewport: true
	 }
	});
	driving.search(ps, pe);

}
function getQueryString(name) {
    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
    var r = window.location.search.substr(1).match(reg);
    if (r != null) 
		return unescape(r[2]);
    }
</script>
